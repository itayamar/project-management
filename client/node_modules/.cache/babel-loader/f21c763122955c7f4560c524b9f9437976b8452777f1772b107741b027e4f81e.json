{"ast":null,"code":"// projects store\nimport Vue from \"vue\";\nimport { fetchProjects, createProject, updateProject, fetchProject, deleteProject } from \"@/services/projects\";\nexport default {\n  state: {\n    projects: [],\n    currentProject: null,\n    totalProjects: 0\n  },\n  mutations: {\n    SET_PROJECTS(state, projects) {\n      state.projects = projects;\n    },\n    SET_CURRENT_PROJECT(state, project) {\n      state.currentProject = project;\n    },\n    SET_TOTAL_PROJECTS(state, totalProjects) {\n      state.totalProjects = totalProjects;\n    },\n    UPDATE_PROJECT(state, updatedProject) {\n      const index = state.projects.findIndex(p => p._id === updatedProject._id);\n      if (index !== -1) {\n        Vue.set(state.projects, index, updatedProject);\n      }\n    },\n    REMOVE_PROJECT(state, projectId) {\n      state.projects = state.projects.filter(p => p._id !== projectId);\n    }\n  },\n  actions: {\n    async fetchProjects({\n      commit\n    }, {\n      page = 1,\n      limit = 20\n    }) {\n      try {\n        commit('SET_LOADING', {\n          type: 'projects',\n          value: true\n        });\n        commit('SET_ERROR', null);\n        const projectsData = await fetchProjects(page, limit);\n        commit('SET_PROJECTS', projectsData.projects);\n        commit('SET_TOTAL_PROJECTS', projectsData.total);\n      } catch (error) {\n        commit('SET_ERROR', error.message);\n      } finally {\n        commit('SET_LOADING', {\n          type: 'projects',\n          value: false\n        });\n      }\n    },\n    async fetchProject({\n      commit\n    }, projectId) {\n      commit('SET_LOADING', {\n        type: 'project',\n        value: true\n      }, {\n        root: true\n      });\n      commit('SET_ERROR', null, {\n        root: true\n      });\n      try {\n        const project = await fetchProject(projectId);\n        commit('SET_CURRENT_PROJECT', project);\n        return project;\n      } catch (error) {\n        commit('SET_ERROR', error.message, {\n          root: true\n        });\n        throw error;\n      } finally {\n        commit('SET_LOADING', {\n          type: 'project',\n          value: false\n        }, {\n          root: true\n        });\n      }\n    },\n    async createProject({\n      commit\n    }, projectData) {\n      try {\n        const project = await createProject(projectData);\n        commit('ADD_PROJECT', project);\n        return project;\n      } catch (error) {\n        commit('SET_ERROR', error.message, {\n          root: true\n        });\n        throw error;\n      }\n    },\n    async updateProject({\n      commit\n    }, {\n      projectId,\n      projectData\n    }) {\n      try {\n        const project = await updateProject(projectId, projectData);\n        commit('UPDATE_PROJECT', project);\n        return project;\n      } catch (error) {\n        commit('SET_ERROR', error.message, {\n          root: true\n        });\n        throw error;\n      }\n    },\n    async deleteProject({\n      commit\n    }, projectId) {\n      try {\n        const response = await deleteProject(projectId);\n        commit('REMOVE_PROJECT', projectId);\n        return response;\n      } catch (error) {\n        commit('SET_ERROR', error.message, {\n          root: true\n        });\n        throw error;\n      }\n    }\n  }\n};","map":{"version":3,"names":["Vue","fetchProjects","createProject","updateProject","fetchProject","deleteProject","state","projects","currentProject","totalProjects","mutations","SET_PROJECTS","SET_CURRENT_PROJECT","project","SET_TOTAL_PROJECTS","UPDATE_PROJECT","updatedProject","index","findIndex","p","_id","set","REMOVE_PROJECT","projectId","filter","actions","commit","page","limit","type","value","projectsData","total","error","message","root","projectData","response"],"sources":["/Users/itayamar/WebstormProjects/toka/client/src/views/projects/projects.js"],"sourcesContent":["// projects store\nimport Vue from \"vue\";\nimport {fetchProjects, createProject, updateProject, fetchProject, deleteProject} from \"@/services/projects\";\n\nexport default {\n  state: {\n    projects: [],\n    currentProject: null,\n    totalProjects: 0,\n  },\n  mutations: {\n    SET_PROJECTS(state, projects) {\n      state.projects = projects;\n    },\n    SET_CURRENT_PROJECT(state, project) {\n      state.currentProject = project\n    },\n    SET_TOTAL_PROJECTS(state, totalProjects) {\n      state.totalProjects = totalProjects;\n    },\n    UPDATE_PROJECT(state, updatedProject) {\n      const index = state.projects.findIndex(p => p._id === updatedProject._id)\n      if (index !== -1) {\n        Vue.set(state.projects, index, updatedProject)\n      }\n    },\n    REMOVE_PROJECT(state, projectId) {\n      state.projects = state.projects.filter(p => p._id !== projectId)\n    }\n  },\n  actions: {\n    async fetchProjects({ commit }, {page=1, limit=20}) {\n      try {\n        commit('SET_LOADING', { type: 'projects', value: true })\n        commit('SET_ERROR', null)\n        const projectsData = await fetchProjects(page, limit)\n        commit('SET_PROJECTS', projectsData.projects)\n        commit('SET_TOTAL_PROJECTS', projectsData.total)\n      } catch (error) {\n        commit('SET_ERROR', error.message)\n      } finally {\n        commit('SET_LOADING', { type: 'projects', value: false })\n      }\n    },\n    async fetchProject({ commit }, projectId) {\n      commit('SET_LOADING', { type: 'project', value: true }, { root: true })\n      commit('SET_ERROR', null, { root: true })\n\n      try {\n        const project = await fetchProject(projectId)\n        commit('SET_CURRENT_PROJECT', project)\n        return project\n      } catch (error) {\n        commit('SET_ERROR', error.message, { root: true })\n        throw error\n      } finally {\n        commit('SET_LOADING', { type: 'project', value: false }, { root: true })\n      }\n    },\n    async createProject({ commit }, projectData) {\n      try {\n        const project = await createProject(projectData)\n        commit('ADD_PROJECT', project)\n        return project\n      } catch (error) {\n        commit('SET_ERROR', error.message, { root: true })\n        throw error\n      }\n    },\n    async updateProject({ commit }, { projectId, projectData }) {\n      try {\n        const project = await updateProject(projectId, projectData)\n        commit('UPDATE_PROJECT', project)\n        return project\n      } catch (error) {\n        commit('SET_ERROR', error.message, { root: true })\n        throw error\n      }\n    },\n    async deleteProject({ commit }, projectId) {\n      try {\n        const response = await deleteProject(projectId)\n        commit('REMOVE_PROJECT', projectId)\n        return response\n      } catch (error) {\n        commit('SET_ERROR', error.message, { root: true })\n        throw error\n      }\n    }\n  },\n\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}